{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "(gdb) Launch verif on test.scabbard.trace",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/verif/verif",
            "args": ["${workspaceFolder}/test/test.scabbard.trace"],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) Launch verif on maybe-race-test.man.trace",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/verif/verif",
            "args": ["${workspaceFolder}/test/maybe-race-test.man.scabbard.trace"],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) Launch verif on maybe-race-test.scabbard.trace",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/verif/verif",
            "args": ["${workspaceFolder}/test/maybe-race-test.scabbard.trace"],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) Launch verif on test-file-read-test.man.trace",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/verif/verif",
            "args": ["${workspaceFolder}/test/trace-file-read-test.man.trace"],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        
        {
            "name": "(gdb) Launch instrumented test file",
            "type": "cppdbg",
            "request": "launch",
            "miDebuggerPath": "/opt/rocm-5.4.3/bin/rocgdb",
            "program": "${workspaceFolder}/test/test.instr.out",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [
                {"name":"SCABBARD_INSTRUMENTED_EXE_NAME", "value":"${workspaceFolder}/test/test.instr.out"},
                {"name":"SCABBARD_TRACE_FILE", "value":"${workspaceFolder}/test/test.instr.scabbard.trace"}
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        
        {
            "name": "(gdb) Instr Build and DBG single file",
            "type": "cppdbg",
            "request": "launch",
            "program": "${fileWithoutExtension}.instr.out",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${fileDirname}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "Instr Current single file"
        },
        {
            "name": "(gdb) scabbard-instr w/ hipcc on test.cpp",
            "type": "cppdbg",
            "request": "launch",
            "program": "/usr/bin/hipcc", // point to debug build of opt
            "args": [
                "-fpass-plugin=${workspaceFolder}/build/instr/libinstr.so", 
                "-g", "-std=c++17",
                "-o${workspaceFolder}/test/test.out",
                "${workspaceFolder}/test/test.cpp",
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [{"name": "SCABBARD_PATH", "value":"${workspaceFolder}/build/libtrace"}],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "[CMake] build scabbard-instr"
        },
        {
            "name": "(gdb) scabbard-instr w/ dbg amdclang++-15 on test.cpp",
            "type": "cppdbg",
            "request": "launch",
            "program": "/g/g11/osterhou/repos/llvm-project/build/bin/clang-15", // point to debug build of opt
            "args": [
                "-cc1","-triple","amdgcn-amd-amdhsa","-aux-triple","x86_64-unknown-linux-gnu","-emit-llvm","-save-temps=cwd","-disable-free","-clear-ast-before-backend","-disable-llvm-verifier","-discard-value-names","-main-file-name","test.cpp","-mrelocation-model","pic","-pic-level","1","-fhalf-no-semantic-interposition","-mframe-pointer=none","-fno-rounding-math","-mconstructor-aliases","-aux-target-cpu","x86-64","-mlink-builtin-bitcode","/var/tmp/osterhou/libbc-trace-amdgcn-gfx90a-6f3a02.a","-mlink-builtin-bitcode","/var/tmp/osterhou/libbc-clang_rt.builtins-x86_64-amdgcn-gfx90a-5fc721.a","-fcuda-is-device","-mllvm","-amdgpu-internalize-symbols","-fcuda-allow-variadic-functions","-fvisibility","hidden","-fapply-global-visibility-to-externs","-mlink-builtin-bitcode","/opt/rocm-5.4.3/amdgcn/bitcode/hip.bc","-mlink-builtin-bitcode","/opt/rocm-5.4.3/amdgcn/bitcode/ocml.bc","-mlink-builtin-bitcode","/opt/rocm-5.4.3/amdgcn/bitcode/ockl.bc","-mlink-builtin-bitcode","/opt/rocm-5.4.3/amdgcn/bitcode/oclc_daz_opt_off.bc","-mlink-builtin-bitcode","/opt/rocm-5.4.3/amdgcn/bitcode/oclc_unsafe_math_off.bc","-mlink-builtin-bitcode","/opt/rocm-5.4.3/amdgcn/bitcode/oclc_finite_only_off.bc","-mlink-builtin-bitcode","/opt/rocm-5.4.3/amdgcn/bitcode/oclc_correctly_rounded_sqrt_on.bc","-mlink-builtin-bitcode","/opt/rocm-5.4.3/amdgcn/bitcode/oclc_wavefrontsize64_on.bc","-mlink-builtin-bitcode","/opt/rocm-5.4.3/amdgcn/bitcode/oclc_isa_version_90a.bc","-mlink-builtin-bitcode","/opt/rocm-5.4.3/amdgcn/bitcode/oclc_abi_version_400.bc","-target-cpu","gfx90a","-mllvm","-treat-scalable-fixed-error-as-warning","-debug-info-kind=constructor","-dwarf-version=5","-debugger-tuning=gdb","-mllvm","-amdgpu-spill-cfi-saved-regs","-gheterogeneous-dwarf","-v","-resource-dir","/opt/rocm-5.4.3/llvm/lib/clang/15.0.0","-O3","-std=c++17","-fno-autolink","-fdebug-compilation-dir=/g/g11/osterhou/repos/scabbard","-ferror-limit","19","-fhip-new-launch-api","-fgnuc-version=4.2.1","-no-opaque-pointers","-fcolor-diagnostics","-vectorize-loops","-vectorize-slp","-fpass-plugin=build/instr/libinstr.so","-mllvm","-amdgpu-early-inline-all=true","-mllvm","-amdgpu-function-calls=false","-cuid=29997d6ee2eea65f","-fcuda-allow-variadic-functions","-faddrsig","-D__GCC_HAVE_DWARF2_CFI_ASM=1","-o","test-hip-amdgcn-amd-amdhsa-gfx90a.ll","-x","ir","test-hip-amdgcn-amd-amdhsa-gfx90a.tmp.bc"

            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [{"name": "SCABBARD_PATH", "value":"${workspaceFolder}/build/libtrace"}],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "[CMake] build scabbard-instr"
        },
        {
            "name": "(gdb) scabbard-instr w/ amdclang++-15 on test.cpp",
            "type": "cppdbg",
            "request": "launch",
            "program": "/opt/rocm-5.4.3/llvm/bin/clang-15", // point to debug build of opt
            "args": [
                "-cc1","-triple","x86_64-unknown-linux-gnu","-aux-triple","amdgcn-amd-amdhsa",
                "-disable-free","-clear-ast-before-backend","-disable-llvm-verifier",
                "-discard-value-names","-main-file-name","test.cpp","-mrelocation-model","static",
                "-mframe-pointer=none","-fmath-errno","-fno-rounding-math","-mconstructor-aliases",
                "-funwind-tables=2","-target-cpu","x86-64","-tune-cpu","generic",
                "-mllvm","-treat-scalable-fixed-error-as-warning",
                "-debug-info-kind=constructor","-dwarf-version=5","-debugger-tuning=gdb","-v",
                "-fcoverage-compilation-dir=/home/oster/repos/scabbard",
                "-resource-dir","/opt/rocm-5.4.3/llvm/lib/clang/15.0.0",
                "-internal-isystem","/opt/rocm-5.4.3/llvm/lib/clang/15.0.0/include/cuda_wrappers",
                "-idirafter","/opt/rocm-5.4.3/include","-include","__clang_hip_runtime_wrapper.h",
                "-isystem","/opt/rocm-5.4.3/llvm/lib/clang/15.0.0/include/..",
                "-isystem","/opt/rocm-5.4.3/hsa/include","-isystem","/opt/rocm-5.4.3/include",
                "-internal-isystem","/usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12",
                "-internal-isystem","/usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/x86_64-linux-gnu/c++/12",
                "-internal-isystem","/usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/backward",
                "-internal-isystem","/usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12","-internal-isystem",
                "/usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/x86_64-linux-gnu/c++/12",
                "-internal-isystem","/usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/backward",
                "-internal-isystem","/opt/rocm-5.4.3/llvm/lib/clang/15.0.0/include",
                "-internal-isystem","/usr/local/include",
                "-internal-isystem","/usr/lib/gcc/x86_64-linux-gnu/12/../../../../x86_64-linux-gnu/include",
                "-internal-externc-isystem","/usr/include/x86_64-linux-gnu",
                "-internal-externc-isystem","/include","-internal-externc-isystem","/usr/include",
                "-internal-isystem","/opt/rocm-5.4.3/llvm/lib/clang/15.0.0/include",
                "-internal-isystem","/usr/local/include",
                "-internal-isystem","/usr/lib/gcc/x86_64-linux-gnu/12/../../../../x86_64-linux-gnu/include",
                "-internal-externc-isystem","/usr/include/x86_64-linux-gnu",
                "-internal-externc-isystem","/include","-internal-externc-isystem","/usr/include",
                "-O3","-std=c++17","-fdeprecated-macro","-fdebug-compilation-dir=/home/oster/repos/scabbard",
                "-ferror-limit","19","-fhip-new-launch-api","-fgnuc-version=4.2.1","-no-opaque-pointers",
                "-fcxx-exceptions","-fexceptions","-fcolor-diagnostics","-vectorize-loops","-vectorize-slp",
                "-mllvm","-amdgpu-early-inline-all=true","-mllvm","-amdgpu-function-calls=false","-cuid=433677c6144bdd1a",
                "-fcuda-allow-variadic-functions","-faddrsig","-D__GCC_HAVE_DWARF2_CFI_ASM=1",
                "-fpass-plugin=build/instr/libinstr.so",
                "-WL,-L${workspaceFolder}/build/libtrace",
                "-o","${workspaceFolder}/test/test.instr.out","-x","hip","test/test.cpp"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [{"name": "SCABBARD_PATH", "value":"${workspaceFolder}/build/libtrace"}],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "[CMake] build scabbard-instr"
        },
        {
            "name": "(gdb) scabbard-instr w/ dbg-opt on test.bc",
            "type": "cppdbg",
            "request": "launch",
            "program": "/opt/rocm/llvm/bin/opt", // point to debug build of opt
            "args": [
                "-load", "${workspaceFolder}/build/instr/libinstr.so", "-scabbard",
                "<", "${workspaceFolder}/test/test.bc"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [{"name": "SCABBARD_PATH", "value":"${workspaceFolder}/build/libtrace"}],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "[CMake] build scabbard-instr"
        },
        {
            "name": "(gdb) Launch current cpp",
            "type": "cppdbg",
            "request": "launch",
            "program": "${fileDirname}/${fileBasenameNoExtension}.out",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${fileDirname}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
    ]
}